# Sign In Canada

## Data Elements

### Authorization Code (code)

#### Description

An OAuth 2.0 Authorization Code Grant. See: https://oauth.net/2/grant-types/authorization-code/

#### Sensitivity

Unclassified

#### Example

    7275ceac-23db-4e4f-b31e-7f3237d56f71

### Pairwise Pseudonym (PAI)

#### Description

A persistent opaque identifier for a user, that is specific to an identity /
openId provider and a relying party or group of relying parties, so as not to
enable relying parties to correlate the End-User's activities without
permission.

#### Sensitivity

Unclassified

#### Example

    sic6cc02a2076d94df9a8d85c70496735c7

### Client Identifier (clientID)

#### Description

An OAuth 2.0 client identifier. See: https://tools.ietf.org/html/rfc6749#section-2.2

Issued by the Sign In Canada Acceptance Platform to each relying party.

#### Sensitivity

Unclassified

### Session ID (sid)

#### Description

String identifier for a Session. This represents a Session of a User Agent or
device for a logged-in End-User at an RP. Different sid values are used to
identify distinct sessions at the Acceptance Platform. Its contents are opaque to the
RP. Its syntax is the same as an OAuth 2.0 Client Identifier.

The Session ID is used to correlate sessions between the Acceptance Platform and
relying parties for the purpose of single logout. It is distinct from, and
should not be confused with the Session Token used by the Acceptance Platform to
maintain an authenticated session with the User Agent.

#### Sensitivity

Unclassified

#### Example

cef71455-bae7-4a4b-8372-5aa78d753b13

### Client Secret

#### Description

An OAuth 2.0 client password. See: https://tools.ietf.org/html/rfc6749#section-2.3.1

Issued to each relying party by the Sign In Canada Acceptance Platform, and used
by the relying party to authenticate to the Acceptance Platform token endpoint.

#### Sensitivity

Protected B

#### Example

    Yrv6Dq7JwMN37SPTV49AO06M

### Session Language (Language)

#### Description

An ISO 639-1 code indicating the end-user's choice of official language. Used to present
the user with web pages in their preferred language.

#### Sensitivity

Unclassified

#### Example

    fr

### Authentication Request

#### Description

An OpenID Connect authentication request. See: https://openid.net/specs/openid-connect-core-1_0.html#AuthRequest

Generated by the relying party and sent to the Sign In Canada Acceptance Platform via the end-user's browser.

#### Sensitivity

Unclassified

#### Example

    https://auth.id.canada.ca/oxauth/restv1/authorize?response_type=code&client_id=dhpp3640-fa7d-474d-bd9f-705c30b52dd0&redirect_uri=https%3A%2F%2Fdev3-auth.id.tbs-sct.gc.ca%2Fpassport%2Fauth%2Fmfa%2Fcallback&scope=openid&login_hint=QkZJdkdFTUdSQmtYV01PU1hwUVE5QmtDSzNUUU1RK29ESmUrVVFzS1BlaHRlWGZyb2l6OU9iNVR5eDRvOFJZZ2h0Q094MkpreE9KZWZtZzRPejVDS3Y3azAva25BTGtHcU5Td2VyelNaWFM5L2QyLzc1Sjlza3ZLQTRrPQ&ui_locales=en&state=cIvneTLRjiF1008ovpxvbT4k

### Token Request

#### Description

An HTTP request to the Acceptance Platform token endpoint. See: https://openid.net/specs/openid-connect-core-1_0.html#TokenRequest

#### Sensitivity

Protected B

#### Example

    POST /oxauth/restv1/token HTTP/1.1
    Host: auth.id.canada.ca
    Content-Type: application/x-www-form-urlencoded

    grant_type=authorization_code&code=SplxlOBeZQQYbYS6WxSbIA&redirect_uri=redirect_uri=https%3A%2F%2Fwww.canada.ca%2Fen.html&client_id=3640-fa7d-474d-bd9f-705c30b52dd0&client_secret=Yrv6Dq7JwMN37SPTV49AO06M

### ID Token

#### Description

A digitally signed security token, in [JSON Web
Token](https://tools.ietf.org/html/rfc7519) format, with a payload that contains
claims about the authentication of an end-user, including their pairwise
pseudonym (PAI). Issued by the Acceptance Platform and consumed by the
relying party. See:
https://openid.net/specs/openid-connect-core-1_0.html#IDToken

#### Sensitivity

Protected A

#### Example

Encoded JWT:

    eyJraWQiOiI3OGM5MGJmMS01MGI3LTRlZGMtYWM5NS1jMzhiOGYwMDUwMDdfc2lnX3JzMjU2IiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoicDVUWVNWWjBWQS1RMDFHZFdsNG4xUSIsImF1ZCI6IjM0MDYxMzExLTFjN2QtNDdlZS1hMGJlLThhNDBjZDliMDQ0OSIsInN1YiI6IjViZjQ5NDJiLTliYTEtNGFjOC04YzUwLTcwMWUzY2Y4ODgxNSIsImF1dGhfdGltZSI6MTU5NjcxNTkyNCwiaXNzIjoiaHR0cHM6Ly9kZXYzLWF1dGguaWQuY2F0c2xhYi5jYSIsImV4cCI6MTU5NjcxOTU0NSwiaWF0IjoxNTk2NzE1OTQ1LCJub25jZSI6IjQ1NiIsIm94T3BlbklEQ29ubmVjdFZlcnNpb24iOiJvcGVuaWRjb25uZWN0LTEuMCJ9.TZ8mEdhmTq1nCX551kUwBFsFf3nx1Wqz4Y9RxMPgL-GMlHjm4JiwAG7FaYxo9lSrL4uMzWx8UibDTlN1bzf5jHe5eZQEPTvDVUcCropJZInrOkryOTidXeTxm2o3EsBDGB-o-O3oeHx5V7m70IaHyQSOevcBCXpuBz2ZPAlUGQZ88HF251xYBfRY9vPxWzaz_ukyjgYDR9B8f_7Iea-lHCsnSq9UMw-J-s9PKoU0Fs3zqCVfy9mgsPi99_jyezdB2PT-eHeN4bKzjpDyqTBSfeHlMZPnM3Bf-0SwMcYM3AlUacr9Tbpof3Ti4LnD2atrfTU5FeWtC4_CxcGF7Bct9g

Decoded payload:

    {
     "iss": "https://auth.id.canada.ca",
     "sub": "sic6cc02a2076d94df9a8d85c70496735c7",
     "aud": "3640-fa7d-474d-bd9f-705c30b52dd0",
     "nonce": "n-0S6_WzA2Mj",
     "exp": 1311281970,
     "iat": 1311280970,
     "auth_time": 1311280969
    }

### Access Token (token)

#### Description

An [OAuth 2.0 bearer token](https://tools.ietf.org/html/rfc6750), used by a
relying party to authenticate to the Acceptance Platform's [UserInfo
endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo).

#### Sensitivity

Protected A

#### Example

add4d437-be56-4973-96ed-86c16ca08087

### Chosen Credential Service Provider

#### Description

The Credential service selected by the user for authentication.

#### Sensitivity

Unclassified

#### Example

GCKey

### User Account

#### Description

All of the data associated with an end-users account is represented as one or
 more [JSON](https://www.json.org/json-en.html) documents stored in the NoSQL
 database. The member data elements of these documents consist of various
 anonymous identifiers, creation, last login, and last update timestamps, and
 the user's current session language.

Anonymous identifiers include:
* a unique randomly-generated user_id,
* the pairwise pseudonyms assigned to the user's MFA, GCKey, and/or CBS profile,
* the pairwise pseudonyms created by the Acceptance platform for relying parties,
* a unique randomly-generated International Number (inum) used as a primary key for database operations.


#### Sensitivity

Protected B

#### Examples

A user account associated with a GCKey credential:

    {
    "uid": "72e8f8160cad45afab204ae11e506ada",
    "gluuStatus": "active",
    "oxExternalUid": "passport-saml:gckey:aEx8eN21ijQNpDvLove52iMQbnpW",
    "objectClass": "gluuPerson",
    "dn": "inum=ab7af1f8-3b57-4634-bc89-c9e440523ef2,ou=people,o=gluu",
    "oxCreationTimestamp": "2020-10-14T08:06:51.351",
    "locale": "en",
    "inum": "ab7af1f8-3b57-4634-bc89-c9e440523ef2",
    "oxLastLogonTime": "2020-10-16T10:28:33.066",
    "updatedAt": "2020-10-16T10:28:33.048",
    "persistentId": [
        "https://rp1.tbstest.catslab.ca|https://dev3-auth.id.catslab.ca|sicc4b861671f624b798c82e126c884f7e7",
        "https://rp2.tbstest.catslab.ca|https://dev3-auth.id.catslab.ca|sic1f49801bf4ed46588c8c2c5987e86207"
    ],
    "oxPPID": "2906f098-5e86-4e76-b049-579df348f02a"
    }

An OpenID Connect pairwise pseudonym assigned to a relying party:

    {
    "oxId": "2906f098-5e86-4e76-b049-579df348f02a",
    "oxAuthUserId": "ab7af1f8-3b57-4634-bc89-c9e440523ef2",
    "objectClass": "pairwiseIdentifier",
    "oxSectorIdentifier": "www.canada.ca",
    "dn": "oxId=2906f098-5e86-4e76-b049-579df348f02a,ou=pairwiseIdentifiers,inum=ab7af1f8-3b57-4634-bc89-c9e440523ef2,ou=people,o=gluu",
    "oxAuthClientId": "49b8e28e-f2ec-4277-bc5e-464808955e4b"
    }


